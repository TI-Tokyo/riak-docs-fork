---
title: "Re: Riak_ensemble implementation"
description: ""
project: community
lastmod: 2016-03-08T08:40:55-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17130"
mailinglist_parent_id: "msg17129"
author_name: "Sargun Dhillon"
project_section: "mailinglistitem"
sent_date: 2016-03-08T08:40:55-08:00
---


If you want to learn to use riak\\_ensemble the library, the
documentation that Joe put together (and others)
https://github.com/basho/riak\\_ensemble/blob/develop/doc/Readme.md

There's real world usage of the code here:
-https://github.com/basho/riak\\_kv/blob/develop/src/riak\\_kv\\_ensembles.erl

Basically as a user, you have to create the root ensemble, add all
your nodes to it, and then create your individual, "sub-ensembles".

You need to implement a backend, and this is a rough sketch of one:
https://github.com/basho/riak\\_ensemble/blob/develop/src/riak\\_ensemble\\_basic\\_backend.erl

Due the design of Riak ensemble, and the fact that's it's effectively
a bunch of individual vertical Paxos group in conjunction with its
usage of single decree, over multi-decree paxos it has some
interesting fault-recovery semantics. An example of this is the
adjustable paranoia level -- it has some strong failure-recovery
semantics, so in the highest paranoia mode, if you have 5 nodes, and
one fails. When that node comes back, it will have to sync with 3/5 of
the other nodes to be considered good to go.

Even with this, riak ensemble is a pretty easy, fun library to use.
The fact that it's a composition of single decree paxos groups it
makes it much simpler to understand, and you can implement SMR atop
it, like so: https://github.com/sargun/riak\\_ensemble/commits/sargun/redis
(see the few extra commits)

On Tue, Mar 8, 2016 at 8:19 AM, Carlos González Florido
 wrote:
&gt; You may have a look at nkbase[1] that includes riak\\_ensemble as one of it
&gt; working models.
&gt;
&gt; [1]
&gt; https://github.com/NetComposer/nkbase/blob/master/doc/strong\\_consistency.md
&gt;
&gt; Carlos González
&gt; NetComposer
&gt;
&gt;
&gt; On Mon, Mar 7, 2016 at 4:48 AM, Agung Laksono 
&gt; wrote:
&gt;&gt;
&gt;&gt; Hi Basho developer,
&gt;&gt;
&gt;&gt; I've seen the video that you guys present about rian\\_ensemble. I am
&gt;&gt; interesting to implement riak\\_ensemble in the production environment in the
&gt;&gt; future. After reading the
&gt;&gt; documentation(https://github.com/basho/riak\\_ensemble/tree/develop/doc), I
&gt;&gt; still couldn't understand how it's work and implement it. Could you tell me
&gt;&gt; in a simple way to implement it in the single node to simulate multiple
&gt;&gt; nodes or 3 real nodes?
&gt;&gt;
&gt;&gt; So far, I can compile riak\\_ensemble via rebar and run
&gt;&gt; application:ensure\\_all\\_started(riak\\_ensemble). But I don't know what should
&gt;&gt; I do after that(sent K/V, communicate to other nodes, etc)
&gt;&gt;
&gt;&gt; Thank you in advance.
&gt;&gt;
&gt;&gt; --
&gt;&gt; Warm Regards,
&gt;&gt;
&gt;&gt; Agung Laksono
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

