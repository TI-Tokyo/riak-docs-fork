---
title: "Re: Build otp_src_R16B02-basho5 on Heroku"
description: ""
project: community
lastmod: 2015-02-05T09:13:39-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15638"
mailinglist_parent_id: "msg15628"
author_name: "Corentin Jechoux"
project_section: "mailinglistitem"
sent_date: 2015-02-05T09:13:39-08:00
---


Thank you Christopher for your fast answer. However, I did not mentionned
that I was using "cedar-14" stack. With an ephemeral file system : the file
system enable writes operations, but wrtten files are not saved when a dyno
restart [1]. Moreover, I can write file, because the "make" command did not
fail at the 1st compilation, but it fails, each time, with the same file.

cd lib && \\
 ERL\\_TOP=/app/otp\\_src\\_R16B02-basho5
PATH=/app/otp\\_src\\_R16B02-basho5/bootstrap/bin:"${PATH}" \\
 make opt SECONDARY\\_BOOTSTRAP=true
make[1]: Entering directory `/app/otp\\_src\\_R16B02-basho5/lib'
make[2]: Entering directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe'
Makefile:71: warning: overriding commands for target `clean'
/app/otp\\_src\\_R16B02-basho5/make/otp\\_subdir.mk:28: warning: ignoring old
commands for target `clean'
=== Entering application hipe
make[3]: Entering directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe/rtl'
(cd ../main && make hipe.hrl)
make[4]: Entering directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe/main'
sed -e "s;%VSN%;3.10.2.1;" ../../hipe/main/hipe.hrl.src &gt;
../../hipe/main/hipe.hrl
make[4]: Leaving directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe/main'
erlc -W +debug\\_info +inline +warn\\_unused\\_import +warn\\_exported\\_vars
-o../ebin hipe\\_rtl.erl
/app/otp\\_src\\_R16B02-basho5/lib/hipe/rtl/../ebin/hipe\\_rtl.bea#: error
writing file
make[3]: \\*\\*\\* [../ebin/hipe\\_rtl.beam] Error 1
make[3]: Leaving directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe/rtl'
make[2]: \\*\\*\\* [opt] Error 2
make[2]: Leaving directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe'
make[1]: \\*\\*\\* [opt] Error 2
make[1]: Leaving directory `/app/otp\\_src\\_R16B02-basho5/lib'
make: \\*\\*\\* [secondary\\_bootstrap\\_build] Error 2

Regards

Corentin

[1] https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem

2015-02-03 22:30 GMT+01:00 Christopher Meiklejohn :

&gt;
&gt; On Feb 3, 2015, at 7:45 AM, Corentin Jechoux &lt;
&gt; corentin.jechoux....@gmail.com&gt; wrote:
&gt;
&gt; Hello,
&gt;
&gt; I try to build Basho's Erlang version on Heroku server.
&gt;
&gt; The commands used are
&gt; ./configure
&gt; make
&gt;
&gt; However I face an issue :
&gt;
&gt; cd lib && \\
&gt; ERL\\_TOP=/app/otp\\_src\\_R16B02-basho5
&gt; PATH=/app/otp\\_src\\_R16B02-basho5/bootstrap/bin:"${PATH}" \\
&gt; make opt SECONDARY\\_BOOTSTRAP=true
&gt; make[1]: Entering directory `/app/otp\\_src\\_R16B02-basho5/lib'
&gt; make[2]: Entering directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe'
&gt; Makefile:71: warning: overriding commands for target `clean'
&gt; /app/otp\\_src\\_R16B02-basho5/make/otp\\_subdir.mk:28: warning: ignoring old
&gt; commands for target `clean'
&gt; === Entering application hipe
&gt; make[3]: Entering directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe/rtl'
&gt; erlc -W +debug\\_info +inline +warn\\_unused\\_import +warn\\_exported\\_vars
&gt; -o../ebin hipe\\_rtl.erl
&gt; /app/otp\\_src\\_R16B02-basho5/lib/hipe/rtl/../ebin/hipe\\_rtl.bea#: error
&gt; writing file
&gt; make[3]: \\*\\*\\* [../ebin/hipe\\_rtl.beam] Error 1
&gt; make[3]: Leaving directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe/rtl'
&gt; make[2]: \\*\\*\\* [opt] Error 2
&gt; make[2]: Leaving directory `/app/otp\\_src\\_R16B02-basho5/lib/hipe'
&gt; make[1]: \\*\\*\\* [opt] Error 2
&gt; make[1]: Leaving directory `/app/otp\\_src\\_R16B02-basho5/lib'
&gt; make: \\*\\*\\* [secondary\\_bootstrap\\_build] Error 2
&gt;
&gt;
&gt; Herokuâ€™s dyno's provide a read-only filesystem. There are two locations
&gt; that provide ephemeral storage, specifically documented here [1], where you
&gt; need to compile Erlang.
&gt;
&gt; Thanks,
&gt; - Chris
&gt;
&gt; [1] https://devcenter.heroku.com/articles/read-only-filesystem
&gt;
&gt; Christopher Meiklejohn
&gt; Senior Software Engineer
&gt; Basho Technologies, Inc.
&gt; cmeiklej...@basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

