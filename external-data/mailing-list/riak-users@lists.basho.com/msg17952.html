<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: [Basho Riak] Fail To Update Document Repeatly With Cluster of 5	Nodes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17952" id="c">
<link rel="index" href="maillist.html#17952" id="i">
<link rel="prev" href="msg17951.html" id="p">
<link rel="next" href="msg17953.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17952.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+%5C%5BBasho+Riak%5C%5D+Fail+To+Update+Document+Repeatly+With+Cluster+of+5%09Nodes%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: [Basho Riak] Fail To Update Document Repeatly With Cluster of 5	Nodes</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22John+Daily%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">John Daily</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20170210" rel="nofollow">Fri, 10 Feb 2017 00:20:12 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>The questions about your IP addresses are good ones: you’re likely to run into 
more trouble when a Riak cluster is spread across multiple networks, and from a 
security standpoint I would recommend against exposing Riak KV to an untrusted 
network, even if its security features are enabled.</pre><pre>

Would you please try setting pw=3 and pr=3 on your writes and reads? I would 
not be surprised to find that the objects which consistently succeed will 
report success, while the objects that consistently have trouble will report an 
error.

Decreasing those values to 2 would also be interesting: if a CRDT update 
succeeds with pw=2 and a fetch succeeds with pr=2 and the data is still stale, 
that would be of particular concern.

And it should not matter for this use case, but please check to see whether all 
your server clocks are synchronized.

-John

&gt; On Feb 9, 2017, at 3:21 PM, DeadZen &lt;dead...@deadzen.com&gt; wrote:
&gt; 
&gt; Why are they public?
&gt; 
&gt; On Thu, Feb 9, 2017 at 3:11 PM, Alexander Sicular &lt;sicul...@gmail.com&gt; wrote:
&gt;&gt; Speaking of timings:
&gt;&gt; 
&gt;&gt; ring_members : ['riak-node1@64.137.190.244','riak-node2@64.137.247.82',
&gt;&gt; 'riak-node3@64.137.162.64','riak-node4@64.137.161.229',
&gt;&gt; 'riak-node5@64.137.217.73']
&gt;&gt; 
&gt;&gt; Are these nodes in the same local area network?
&gt;&gt; 
&gt;&gt; On Thu, Feb 9, 2017 at 12:49 PM, my hue &lt;tranmyhue.grac...@gmail.com&gt; wrote:
&gt;&gt;&gt; Dear Russel,
&gt;&gt;&gt; 
&gt;&gt;&gt; I did the simplest possible with new document and use modify_type to update
&gt;&gt;&gt; a single register.
&gt;&gt;&gt; I still meet fail update at some times.
&gt;&gt;&gt; 
&gt;&gt;&gt; My steps did as follow :
&gt;&gt;&gt; 
&gt;&gt;&gt; Step 1:   Initial a new document Map
&gt;&gt;&gt; Step 2:  Create new map with :  riakc_pb_socket:update_type(Pid,
&gt;&gt;&gt; {BucketType, Bucket}, Key,  riakc_map:to_op(Map), []).
&gt;&gt;&gt; Step 3:   Fetch to check result :
&gt;&gt;&gt; riakc_pb_socket:fetch_type(Pid,{BucketType,Bucket}, Key).
&gt;&gt;&gt; Step 4:  Create Fun for input of modify_type which update only one field of
&gt;&gt;&gt; map
&gt;&gt;&gt; 
&gt;&gt;&gt; Fun1 = fun(OldMap) -&gt; riakc_map:update({&lt;&lt;&quot;status_id&quot;&gt;&gt;, register}, fun(R)
&gt;&gt;&gt; -&gt; riakc_register:set(&lt;&lt;&quot;show&quot;&gt;&gt;,  R) end, OldMap) end.
&gt;&gt;&gt; 
&gt;&gt;&gt; Fun2 = fun(OldMap) -&gt; riakc_map:update({&lt;&lt;&quot;status_id&quot;&gt;&gt;, register}, fun(R)
&gt;&gt;&gt; -&gt; riakc_register:set(&lt;&lt;&quot;hide&quot;&gt;&gt;,  R) end, OldMap) end.
&gt;&gt;&gt; 
&gt;&gt;&gt; Step 5: Update :
&gt;&gt;&gt; 
&gt;&gt;&gt; riakc_pb_socket:modify_type(Pid, Fun1, {BucketType, Bucket}, Key, []).
&gt;&gt;&gt; 
&gt;&gt;&gt; Fetch to check :
&gt;&gt;&gt; 
&gt;&gt;&gt; riakc_pb_socket:fetch_type(Pid,{BucketType,Bucket}, Key).
&gt;&gt;&gt; 
&gt;&gt;&gt; Step 6:  Update:
&gt;&gt;&gt; 
&gt;&gt;&gt; riakc_pb_socket:modify_type(Pid, Fun2, {BucketType, Bucket}, Key, []).
&gt;&gt;&gt; 
&gt;&gt;&gt; Fetch to check :
&gt;&gt;&gt; 
&gt;&gt;&gt; riakc_pb_socket:fetch_type(Pid,{BucketType,Bucket}, Key).
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; For my debug and test,  I repeated step 5 and step 6 on one document about
&gt;&gt;&gt; 20 times.
&gt;&gt;&gt; And via many documents, I meet weird behaviour that some documents meet fail
&gt;&gt;&gt; update, and some documents never fail update.
&gt;&gt;&gt; The first time, I think that cause network, or timeout between nodes and
&gt;&gt;&gt; this is only random of fail.  So I deleted documents with command:
&gt;&gt;&gt; 
&gt;&gt;&gt; riakc_pb_socket:delete(Pid, {BucketType,Bucket}, Key, []).
&gt;&gt;&gt; 
&gt;&gt;&gt; Then retest on each document of first test again. And It is very amazing
&gt;&gt;&gt; that the documents meet fail at first test still meet fail at this second
&gt;&gt;&gt; test, and the documents passed at first test still pass at this second test.
&gt;&gt;&gt; Delete all again, and retest and of course get the same result.
&gt;&gt;&gt; 
&gt;&gt;&gt; After all I make other test case, I used one fail document at all test
&gt;&gt;&gt; times, and keep all fields except change key to get different documents for
&gt;&gt;&gt; the debug.  And very surprise that I still got some fail and some success,
&gt;&gt;&gt; although documents are  the same field and value except key.  Delete and
&gt;&gt;&gt; retest and still the same result. Documents succeeded will be always
&gt;&gt;&gt; succeed. And document meet fail will be always failed.  I totally do not
&gt;&gt;&gt; understand root cause till now. And hope that can get support and help from
&gt;&gt;&gt; the developers of riak.   I can tell that my system mostly fail with cluster
&gt;&gt;&gt; run when faced this issue.
&gt;&gt;&gt; 
&gt;&gt;&gt; The following is some map documents I used on the test.  And I also attached
&gt;&gt;&gt; the extracted log of each node at one of the fail times together with this
&gt;&gt;&gt; email. I do not really get meaning of riak log but hope that can help
&gt;&gt;&gt; developers of riak get something.
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; * New Document which meet fail with my steps.
&gt;&gt;&gt; 
&gt;&gt;&gt; {map,[],
&gt;&gt;&gt;     [{{&lt;&lt;&quot;account_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accountqweraccountqweraccountqwer&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;created_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accountqweraccountqweraccountqwer&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;created_time_dt&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-02-7T23:49:04Z&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;currency&quot;&gt;&gt;,register}, {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;usd&quot;&gt;&gt;}},
&gt;&gt;&gt; 
&gt;&gt;&gt; {{&lt;&lt;&quot;id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;menu1234567812345678123456789&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;maintain_mode_b&quot;&gt;&gt;,register}, {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;false&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;menu_category_revision_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0-634736bc14e0bd3ed7e3fe0f1ee64443&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;name&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;menutest&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;order_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;rest_location_p&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;10.844117421366443,106.63982392275398&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;restaurant_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;rest848e042b3a0488640981c8a6dc4a8281&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;restaurant_status_id&quot;&gt;&gt;,register}, {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;active&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;start_time&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;dont_use&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;status_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;show&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;updated_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accountqweraccountqweraccountqwer&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;updated_time_dt&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-02-7T23:49:04Z&quot;&gt;&gt;}}],
&gt;&gt;&gt;     [],undefined}.
&gt;&gt;&gt; 
&gt;&gt;&gt; Key = &lt;&lt;&quot;menu1234567812345678123456789&quot;&gt;&gt;
&gt;&gt;&gt; 
&gt;&gt;&gt; * New Document which always success with my steps:
&gt;&gt;&gt; 
&gt;&gt;&gt; {map,[],
&gt;&gt;&gt;     [{{&lt;&lt;&quot;account_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accountqweraccountqweraccountqwer&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;created_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accountqweraccountqweraccountqwer&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;created_time_dt&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-02-7T23:49:04Z&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;currency&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;usd&quot;&gt;&gt;}},
&gt;&gt;&gt; 
&gt;&gt;&gt; {{&lt;&lt;&quot;id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;menub497380c19be4fd3a3b51c85d4e9f246&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;maintain_mode_b&quot;&gt;&gt;,register}, {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;false&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;menu_category_revision_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0-634736bc14e0bd3ed7e3fe0f1ee64443&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;name&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;menutest&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;order_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;rest_location_p&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;10.844117421366443,106.63982392275398&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;restaurant_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;rest848e042b3a0488640981c8a6dc4a8281&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;restaurant_status_id&quot;&gt;&gt;,register}, {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;active&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;start_time&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;dont_use&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;status_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;show&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;updated_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accountqweraccountqweraccountqwer&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;updated_time_dt&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-02-7T23:49:04Z&quot;&gt;&gt;}}],
&gt;&gt;&gt;     [], undefined}.
&gt;&gt;&gt; 
&gt;&gt;&gt; Key = &lt;&lt;&quot;menub497380c19be4fd3a3b51c85d4e9f246&quot;&gt;&gt;
&gt;&gt;&gt; 
&gt;&gt;&gt; * New Document which fail with my steps
&gt;&gt;&gt; 
&gt;&gt;&gt; {map,[],
&gt;&gt;&gt;     [{{&lt;&lt;&quot;account_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accountqweraccountqweraccountqwer&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;created_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accountqweraccountqweraccountqwer&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;created_time_dt&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-02-7T23:49:04Z&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;currency&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;usd&quot;&gt;&gt;}},
&gt;&gt;&gt; 
&gt;&gt;&gt; {{&lt;&lt;&quot;id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;menufe89488afa948875cab6b0b18d579f22&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;maintain_mode_b&quot;&gt;&gt;,register},  {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;false&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;menu_category_revision_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0-634736bc14e0bd3ed7e3fe0f1ee64443&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;name&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;menutest&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;order_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;rest_location_p&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;10.844117421366443,106.63982392275398&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;restaurant_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;rest848e042b3a0488640981c8a6dc4a8281&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;restaurant_status_id&quot;&gt;&gt;,register}, {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;active&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;start_time&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;dont_use&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;status_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;show&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;updated_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accountqweraccountqweraccountqwer&quot;&gt;&gt;}},
&gt;&gt;&gt;      {{&lt;&lt;&quot;updated_time_dt&quot;&gt;&gt;,register},
&gt;&gt;&gt; {register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-02-7T23:49:04Z&quot;&gt;&gt;}}],
&gt;&gt;&gt;     [],undefined}.
&gt;&gt;&gt; 
&gt;&gt;&gt; Key = &lt;&lt;&quot;menufe89488afa948875cab6b0b18d579f22&quot;&gt;&gt;.
&gt;&gt;&gt; 
&gt;&gt;&gt; Note : All documents mostly the same except key, and  tested with the same
&gt;&gt;&gt; bucket type and bucket.   Bucket Type and Bucket have properties with which
&gt;&gt;&gt; I reported on first email. So for remind, under is a description  of bucket
&gt;&gt;&gt; type, bucket and cluster :
&gt;&gt;&gt; 
&gt;&gt;&gt; * Bucket Type :
&gt;&gt;&gt; 
&gt;&gt;&gt; - Bucket type created with the following command:
&gt;&gt;&gt; 
&gt;&gt;&gt; riak-admin bucket-type create bucket_type_name
&gt;&gt;&gt; '{&quot;props&quot;:{&quot;backend&quot;:&quot;bitcask_mult&quot;,&quot;datatype&quot;:&quot;map&quot;}}'
&gt;&gt;&gt; 
&gt;&gt;&gt; riak-admin bucket-type activate bucket_type_name
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; * Bucket Property:
&gt;&gt;&gt; 
&gt;&gt;&gt; {&quot;props&quot;:{&quot;name&quot;:&quot;bucket_name&quot;,&quot;active&quot;:true,&quot;allow_mult&quot;:true,&quot;backend&quot;:&quot;bitcask_mult&quot;,&quot;basic_quorum&quot;:false,&quot;big_vclock&quot;:50,&quot;chash_keyfun&quot;:{&quot;mod&quot;:&quot;riak_core_util&quot;,&quot;fun&quot;:&quot;chash_std_keyfun&quot;},&quot;claimant&quot;:&quot;riak-node1@64.137.190.244&quot;,&quot;datatype&quot;:&quot;map&quot;,&quot;dvv_enabled&quot;:true,&quot;dw&quot;:&quot;quorum&quot;,&quot;last_write_wins&quot;:false,&quot;linkfun&quot;:{&quot;mod&quot;:&quot;riak_kv_wm_link_walker&quot;,&quot;fun&quot;:&quot;mapreduce_linkfun&quot;},&quot;n_val&quot;:3,&quot;name&quot;:&quot;bucket_name&quot;,&quot;notfound_ok&quot;:true,&quot;old_vclock&quot;:86400,&quot;postcommit&quot;:[],&quot;pr&quot;:0,&quot;precommit&quot;:[],&quot;pw&quot;:0,&quot;r&quot;:&quot;quorum&quot;,&quot;rw&quot;:&quot;quorum&quot;,&quot;search_index&quot;:&quot;menu_idx&quot;,&quot;small_vclock&quot;:50,&quot;w&quot;:&quot;quorum&quot;,&quot;young_vclock&quot;:20}}
&gt;&gt;&gt; 
&gt;&gt;&gt; Note :
&gt;&gt;&gt; + &quot;datatype&quot;:&quot;map&quot;
&gt;&gt;&gt; + &quot;last_write_wins&quot;: false
&gt;&gt;&gt; + &quot;dvv_enabled&quot;: true
&gt;&gt;&gt; + &quot;allow_mult&quot;: true
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; * Cluster Infor :
&gt;&gt;&gt; 
&gt;&gt;&gt; - Member status :
&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; riak-admin member-status
&gt;&gt;&gt; 
&gt;&gt;&gt; ================================= Membership
&gt;&gt;&gt; ==================================
&gt;&gt;&gt; Status     Ring    Pending    Node
&gt;&gt;&gt; -------------------------------------------------------------------------------
&gt;&gt;&gt; valid      18.8%      --      'riak-node1@64.137.190.244'
&gt;&gt;&gt; valid      18.8%      --      'riak-node2@64.137.247.82'
&gt;&gt;&gt; valid      18.8%      --      'riak-node3@64.137.162.64'
&gt;&gt;&gt; valid      25.0%      --      'riak-node4@64.137.161.229'
&gt;&gt;&gt; valid      18.8%      --      'riak-node5@64.137.217.73'
&gt;&gt;&gt; -------------------------------------------------------------------------------
&gt;&gt;&gt; Valid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0
&gt;&gt;&gt; 
&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt; 
&gt;&gt;&gt; - Ring
&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; riak-admin status | grep ring
&gt;&gt;&gt; 
&gt;&gt;&gt; ring_creation_size : 64
&gt;&gt;&gt; ring_members : ['riak-node1@64.137.190.244','riak-node2@64.137.247.82',
&gt;&gt;&gt; 'riak-node3@64.137.162.64','riak-node4@64.137.161.229',
&gt;&gt;&gt; 'riak-node5@64.137.217.73']
&gt;&gt;&gt; ring_num_partitions : 64
&gt;&gt;&gt; ring_ownership : &lt;&lt;&quot;[{'riak-node2@64.137.247.82',12},\n
&gt;&gt;&gt; {'riak-node5@64.137.217.73',12},\n {'riak-node1@64.137.190.244',12},\n
&gt;&gt;&gt; {'riak-node3@64.137.162.64',12},\n {'riak-node4@64.137.161.229',16}]&quot;&gt;&gt;
&gt;&gt;&gt; rings_reconciled : 0
&gt;&gt;&gt; rings_reconciled_total : 31
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; On Tue, Feb 7, 2017 at 5:37 PM, Russell Brown &lt;russell.br...@mac.com&gt; wrote:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; On 7 Feb 2017, at 10:27, my hue &lt;tranmyhue.grac...@gmail.com&gt; wrote:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; Dear Russell,
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; Yes, I updated all registers in one go.
&gt;&gt;&gt;&gt;&gt; And I do not try yet with updating a single register at a time.
&gt;&gt;&gt;&gt;&gt; let me try to see.  But I wonder that any affect on solving conflict at
&gt;&gt;&gt;&gt;&gt; riak cluster
&gt;&gt;&gt;&gt;&gt; if update all in one go?
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Just trying to make the search space as small as possible. I don’t think
&gt;&gt;&gt;&gt; _any_ of this should fail. The maps code is very well tested and well used,
&gt;&gt;&gt;&gt; so it’s all kind of odd.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Without hands on it’s hard to debug, and email back and forth is slow, so
&gt;&gt;&gt;&gt; if you try the simplest possible thing and that still fails, it helps.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; IMO the simplest possible thing is to start with a new, empty key and use
&gt;&gt;&gt;&gt; modify_type to update a single register.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Many thanks
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Russell
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; On Tue, Feb 7, 2017 at 5:18 PM, Russell Brown &lt;russell.br...@mac.com&gt;
&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt; So in you’re updating all those registers in one go? Out of interest,
&gt;&gt;&gt;&gt;&gt; what happens if you update a single register at a time?
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; On 7 Feb 2017, at 10:02, my hue &lt;tranmyhue.grac...@gmail.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; Dear Russel,
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Can you run riakc_map:to_op(Map). and show me the output of that,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; please?
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; The following is output of riakc_map:to_op(Map) :
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; {map, {update, [{update,
&gt;&gt;&gt;&gt;&gt;&gt; {&lt;&lt;&quot;updated_time_dt&quot;&gt;&gt;,register},{assign,&lt;&lt;&quot;2017-02-06T17:22:39Z&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;updated_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt; {assign,&lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;}},{update,{&lt;&lt;&quot;status_id&quot;&gt;&gt;,register},{assign,&lt;&lt;&quot;show&quot;&gt;&gt;}},{update,{&lt;&lt;&quot;start_time&quot;&gt;&gt;,register},{assign,&lt;&lt;&quot;dont_use&quot;&gt;&gt;}},{update,{&lt;&lt;&quot;restaurant_status_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt; {assign,&lt;&lt;&quot;inactive&quot;&gt;&gt;}}, {update,{&lt;&lt;&quot;restaurant_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt; {assign,&lt;&lt;&quot;rest848e042b3a0488640981c8a6dc4a8281&quot;&gt;&gt;}},{update,{&lt;&lt;&quot;rest_location_p&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt; {assign,&lt;&lt;&quot;10.844117421366443,106.63982392275398&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;order_i&quot;&gt;&gt;,register},{assign,&lt;&lt;&quot;0&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;name&quot;&gt;&gt;,register},{assign,&lt;&lt;&quot;fullmenu&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;menu_category_revision_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt; {assign,&lt;&lt;&quot;0-634736bc14e0bd3ed7e3fe0f1ee64443&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;maintain_mode_b&quot;&gt;&gt;,register},{assign,&lt;&lt;&quot;false&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt; {assign,&lt;&lt;&quot;menufe89488afa948875cab6b0b18d579f21&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;end_time&quot;&gt;&gt;,register},{assign,&lt;&lt;&quot;dont_use&quot;&gt;&gt;}},{update,{&lt;&lt;&quot;currency&quot;&gt;&gt;,register},{assign,&lt;&lt;&quot;cad&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;created_time_dt&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt; {assign,&lt;&lt;&quot;2017-01-27T03:34:04Z&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;created_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt; {assign,&lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;}},
&gt;&gt;&gt;&gt;&gt;&gt; {update,{&lt;&lt;&quot;account_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt; {assign,&lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;}}]},
&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;131,108,0,0,0,3,104,2,109,0,0,0,12,39,21,84,209,219,42,57,233,0,0,156,252,97,34,104,2,109,0,0,0,12,132,107,248,226,103,5,182,208,0,0,118,2,97,39,104,2,109,0,0,0,12,137,252,139,186,176,202,25,96,0,0,195,164,97,53,106&gt;&gt;}
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; On Tue, Feb 7, 2017 at 4:36 PM, Russell Brown &lt;russell.br...@mac.com&gt;
&gt;&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; On 7 Feb 2017, at 09:34, my hue &lt;tranmyhue.grac...@gmail.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Dear Russell,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; What operation are you performing? What is the update you perform?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Do you set a register value, add a register, remove a register?
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; I used riakc_map:update to update value with map. I do the following
&gt;&gt;&gt;&gt;&gt;&gt;&gt; steps :
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Get FetchData map with  fetch_type
&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Extract key, value, context from FetchData
&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Obtain UpdateData with:
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; + Init map with context
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; I don’t understand this step
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; + Use :
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   riakc_map:update({K, register}, fun(R) -&gt; riakc_register:set(V,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; R) end,  InitMap)
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; to obtain UpdateData
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Note:
&gt;&gt;&gt;&gt;&gt;&gt;&gt; K : key
&gt;&gt;&gt;&gt;&gt;&gt;&gt; V:  value
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Then  update UpdateData with update_type
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; Can you run riakc_map:to_op(Map). and show me the output of that,
&gt;&gt;&gt;&gt;&gt;&gt; please?
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; The following is sample about Update data :
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; {map, [] ,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; [{{&lt;&lt;&quot;account_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;}},{{&lt;&lt;&quot;created_by_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;}},{{&lt;&lt;&quot;created_time_dt&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-01-27T03:34:04Z&quot;&gt;&gt;}},{{&lt;&lt;&quot;currency&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;cad&quot;&gt;&gt;}},{{&lt;&lt;&quot;end_time&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;dont_use&quot;&gt;&gt;}},{{&lt;&lt;&quot;id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;menufe89488afa948875cab6b0b18d579f21&quot;&gt;&gt;}},{{&lt;&lt;&quot;maintain_mode_b&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;false&quot;&gt;&gt;}},{{&lt;&lt;&quot;menu_category_revision_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0-634736bc14e0bd3ed7e3fe0f1ee64443&quot;&gt;&gt;}},{{&lt;&lt;&quot;name&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;fullmenu&quot;&gt;&gt;}},{{&lt;&lt;&quot;order_i&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0&quot;&gt;&gt;}},{{&lt;&lt;&quot;rest_location_p&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;10.844117421366443,106.63982392275398&quot;&gt;&gt;}},{{&lt;&lt;&quot;restaurant_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;rest848e042b3a0488640981c8a6dc4a8281&quot;&gt;&gt;}},{{&lt;&lt;&quot;restaurant_status_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;inactive&quot;&gt;&gt;}},{{&lt;&lt;&quot;start_time&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;dont_use&quot;&gt;&gt;}},{{&lt;&lt;&quot;status_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;show&quot;&gt;&gt;}},{{&lt;&lt;&quot;updated_by_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;}},{{&lt;&lt;&quot;updated_time_dt&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-02-06T17:22:39Z&quot;&gt;&gt;}}],
&gt;&gt;&gt;&gt;&gt;&gt;&gt; [] ,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;131,108,0,0,0,3,104,2,109,0,0,0,12,39,21,84,209,219,42,57,233,0,0,156,252,97,34,104,2,109,0,0,0,12,132,107,248,226,103,5,182,208,0,0,118,2,97,39,104,2,109,0,0,0,12,137,252,139,186,176,202,25,96,0,0,195,164,97,53,106&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; }
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Tue, Feb 7, 2017 at 3:43 PM, Russell Brown
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;russell.br...@mac.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; On 7 Feb 2017, at 08:17, my hue &lt;tranmyhue.grac...@gmail.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Dear John and Russell Brown,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * How fast is your turnaround time between an update and a fetch?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The turnaround time between an update and a fetch about 1 second.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; During my team and I  debug, we adjusted haproxy with the scenario
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; as follow:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Scenario 1 : round robin via 5 nodes of cluster
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; We meet issue at scenario 1 and we are afraid of that timeout can
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; be occurs between nodes,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; make us still get stale data. Then we performed scenario 2
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Scenario 2:  Disable round robin and only route request to node 1.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Cluster still is 5 nodes.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; With this case we ensure that request update and fetch always come
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; to and from node 1.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; And the issue still occurs.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; At the fail time, I hoped that can get any error log from riak
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; nodes to give me any information.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; But riak log show to me nothing and everything is ok.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * What operation are you performing?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I used :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riakc_pb_socket:update_type(Pid, {Bucket-Type, Bucket}, Key,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riakc_map:to_op(Map), []).
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riakc_pb_socket:fetch_type(Pid, {BucketType, Bucket}, Key, []).
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; What operation are you performing? What is the update you perform?
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Do you set a register value, add a register, remove a register?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * It looks like the map is a single level map of last-write-wins
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; registers. Is there a chance that the time on the node handling the 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; update
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; is behind the value in the lww-register?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; =&gt; I am not sure about logic show conflict of internal riak node.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; And the issue  never happens if I used single node.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My bucket properties as follow :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {&quot;props&quot;:{&quot;name&quot;:&quot;menu&quot;,&quot;active&quot;:true,&quot;allow_mult&quot;:true,&quot;backend&quot;:&quot;bitcask_mult&quot;,&quot;basic_quorum&quot;:false,&quot;big_vclock&quot;:50,&quot;chash_keyfun&quot;:{&quot;mod&quot;:&quot;riak_core_util&quot;,&quot;fun&quot;:&quot;chash_std_keyfun&quot;},&quot;claimant&quot;:&quot;riak-node1@64.137.190.244&quot;,&quot;datatype&quot;:&quot;map&quot;,&quot;dvv_enabled&quot;:true,&quot;dw&quot;:&quot;quorum&quot;,&quot;last_write_wins&quot;:false,&quot;linkfun&quot;:{&quot;mod&quot;:&quot;riak_kv_wm_link_walker&quot;,&quot;fun&quot;:&quot;mapreduce_linkfun&quot;},&quot;n_val&quot;:3,&quot;name&quot;:&quot;menu&quot;,&quot;notfound_ok&quot;:true,&quot;old_vclock&quot;:86400,&quot;postcommit&quot;:[],&quot;pr&quot;:0,&quot;precommit&quot;:[],&quot;pw&quot;:0,&quot;r&quot;:&quot;quorum&quot;,&quot;rw&quot;:&quot;quorum&quot;,&quot;search_index&quot;:&quot;menu_idx&quot;,&quot;small_vclock&quot;:50,&quot;w&quot;:&quot;quorum&quot;,&quot;young_vclock&quot;:20}}
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Note :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; + &quot;datatype&quot;:&quot;map&quot;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; + &quot;last_write_wins&quot;: false
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; + &quot;dvv_enabled&quot;: true
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; + &quot;allow_mult&quot;: true
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * Have you tried using the `modify_type` operation in
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riakc_pb_socket which does the fetch/update operation in sequence for 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; you?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; =&gt; I dot not use yet, but my action is sequence with fetch and
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; then update.  Might be I will try modify_type to see.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * Anything in the error logs on any of the nodes?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; =&gt; From the node log,  no errror report at fail time.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * Is the opaque context identical from the fetch and then later
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; after the update?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; =&gt; There is the context  got from fetch and that context used with
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; update.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; And during our debug time with string of sequence : fetch ,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; update, fetch , update , ....  the context I saw always the same at
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; fetch data.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Best regards,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hue Tran
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Tue, Feb 7, 2017 at 2:11 AM, John Daily &lt;jda...@basho.com&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Originally I suspected the context which allows Riak to resolve
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; conflicts was not present in your data, but I see it in your map 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; structure.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for supplying such a detailed description.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; How fast is your turnaround time between an update and a fetch?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Even if the cluster is healthy it’s not impossible to see a timeout 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; between
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; nodes, which could result in a stale retrieval. Have you verified 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; whether
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the stale data persists?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; A single node cluster gives an advantage that you’ll never see in
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; a real cluster: a perfectly synchronized clock. It also reduces (but 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; does
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; not completely eliminate) the possibility of an internal timeout 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; between
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; processes.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -John
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Feb 6, 2017, at 1:02 PM, my hue &lt;tranmyhue.grac...@gmail.com&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Dear Riak Team,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I and my team used riak as database for my production with an
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cluster including 5 nodes.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; While production run, we meet an critical bug that is sometimes
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; fail to update document.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I and my colleagues performed debug and detected an issue with
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the scenario as follow:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; +  fetch document
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; +  change value of document
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; +  update document
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Repeat about 10 times and will meet fail. With the document is
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; updated continually,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; sometimes will face update fail.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The first time,  5 nodes of cluster we used riak version 2.1.1.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; After meet above bug, we upgraded to use riak version 2.2.0 and
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; this issue still occurs.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Via many time test,  debug using  Tcpdump at riak node :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; tcpdump -A -ttt  -i {interface} src host {host} and dst port
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {port}
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; And together with the command:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-admin status | grep &quot;node_puts_map\| node_puts_map_total\|
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; node_puts_total\| vnode_map_update_total\| vnode_puts_total\&quot;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; we  got that the riak server already get the update request.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; However, do not know why riak backend fail to update document.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; At the fail time,  from riak server log everything is ok.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Then we removed cluster and use a single riak server,  and see
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; that above bug never happen.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; For that reason, think that is only happen with cluster work. We
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; took research on basho riak document and our riak configure
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; seems that like suggestion from document.  We totally blocked on
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; this issue and hope that can get support from you
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; so that can obtain a stable work from riak database for our
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; production.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thank you so much.  Hope that can get your reply soon.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * The following is our riak node information :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Riak version:  2.2.0
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS :  CentOS Linux release 7.2.1511
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Cpu :  4 core
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Memory : 4G
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Riak configure : the attached file &quot;riak.conf&quot;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Note :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - We mostly using default configure of riak configure except that
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; we used storage backend is multi
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; storage_backend = multi
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; multi_backend.bitcask_mult.storage_backend = bitcask
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; multi_backend.bitcask_mult.bitcask.data_root =
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; /var/lib/riak/bitcask_mult
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; multi_backend.default = bitcask_mult
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Bucket type created with the following command:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-admin bucket-type create dev_restor
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; '{&quot;props&quot;:{&quot;backend&quot;:&quot;bitcask_mult&quot;,&quot;datatype&quot;:&quot;map&quot;}}'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-admin bucket-type activate dev_restor
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Bucket Type Status :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-admin bucket-type status dev_restor
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; dev_restor is active
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; young_vclock: 20
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; w: quorum
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; small_vclock: 50
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; rw: quorum
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; r: quorum
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; pw: 0
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; precommit: []
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; pr: 0
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; postcommit: []
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; old_vclock: 86400
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; notfound_ok: true
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; n_val: 3
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; linkfun: {modfun,riak_kv_wm_link_walker,mapreduce_linkfun}
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; last_write_wins: false
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; dw: quorum
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; dvv_enabled: true
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; chash_keyfun: {riak_core_util,chash_std_keyfun}
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; big_vclock: 50
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; basic_quorum: false
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; backend: &lt;&lt;&quot;bitcask_mult&quot;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; allow_mult: true
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; datatype: map
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; active: true
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; claimant: 'riak-node1@64.137.190.244'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Bucket Property :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {&quot;props&quot;:{&quot;name&quot;:&quot;menu&quot;,&quot;active&quot;:true,&quot;allow_mult&quot;:true,&quot;backend&quot;:&quot;bitcask_mult&quot;,&quot;basic_quorum&quot;:false,&quot;big_vclock&quot;:50,&quot;chash_keyfun&quot;:{&quot;mod&quot;:&quot;riak_core_util&quot;,&quot;fun&quot;:&quot;chash_std_keyfun&quot;},&quot;claimant&quot;:&quot;riak-node1@64.137.190.244&quot;,&quot;datatype&quot;:&quot;map&quot;,&quot;dvv_enabled&quot;:true,&quot;dw&quot;:&quot;quorum&quot;,&quot;last_write_wins&quot;:false,&quot;linkfun&quot;:{&quot;mod&quot;:&quot;riak_kv_wm_link_walker&quot;,&quot;fun&quot;:&quot;mapreduce_linkfun&quot;},&quot;n_val&quot;:3,&quot;name&quot;:&quot;menu&quot;,&quot;notfound_ok&quot;:true,&quot;old_vclock&quot;:86400,&quot;postcommit&quot;:[],&quot;pr&quot;:0,&quot;precommit&quot;:[],&quot;pw&quot;:0,&quot;r&quot;:&quot;quorum&quot;,&quot;rw&quot;:&quot;quorum&quot;,&quot;search_index&quot;:&quot;menu_idx&quot;,&quot;small_vclock&quot;:50,&quot;w&quot;:&quot;quorum&quot;,&quot;young_vclock&quot;:20}}
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Member status :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-admin member-status
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ================================= Membership
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ==================================
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Status     Ring    Pending    Node
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; valid      18.8%      --      'riak-node1@64.137.190.244'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; valid      18.8%      --      'riak-node2@64.137.247.82'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; valid      18.8%      --      'riak-node3@64.137.162.64'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; valid      25.0%      --      'riak-node4@64.137.161.229'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; valid      18.8%      --      'riak-node5@64.137.217.73'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Valid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Ring
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-admin status | grep ring
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ring_creation_size : 64
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ring_members :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ['riak-node1@64.137.190.244','riak-node2@64.137.247.82',
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 'riak-node3@64.137.162.64','riak-node4@64.137.161.229',
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 'riak-node5@64.137.217.73']
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ring_num_partitions : 64
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ring_ownership : &lt;&lt;&quot;[{'riak-node2@64.137.247.82',12},\n
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {'riak-node5@64.137.217.73',12},\n {'riak-node1@64.137.190.244',12},\n
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {'riak-node3@64.137.162.64',12},\n 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {'riak-node4@64.137.161.229',16}]&quot;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; rings_reconciled : 0
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; rings_reconciled_total : 31
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * The riak client :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; + riak-erlang-client:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="https://github.com/basho/riak-erlang-client">https://github.com/basho/riak-erlang-client</a>
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; + release :   2.4.2
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * Riak client API used:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; + Insert/Update:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riakc_pb_socket:update_type(Pid, {Bucket-Type, Bucket}, Key,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riakc_map:to_op(Map), []).
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; + Fetch :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riakc_pb_socket:fetch_type(Pid, {BucketType, Bucket}, Key, []).
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; * Step to perform an  update :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Fetch document
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Update document
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -----------------------------------------------------------------------------------------------------------------------------
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; *  Data got from fetch_type:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {map,  [{{&lt;&lt;&quot;account_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;created_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;created_time_dt&quot;&gt;&gt;,register},&lt;&lt;&quot;2017-01-27T03:34:04Z&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;currency&quot;&gt;&gt;,register},&lt;&lt;&quot;cad&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;end_time&quot;&gt;&gt;,register},&lt;&lt;&quot;dont_use&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;id&quot;&gt;&gt;,register},&lt;&lt;&quot;menufe89488afa948875cab6b0b18d579f21&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;maintain_mode_b&quot;&gt;&gt;,register},&lt;&lt;&quot;false&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;menu_category_revision_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;&quot;0-634736bc14e0bd3ed7e3fe0f1ee64443&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;name&quot;&gt;&gt;,register},&lt;&lt;&quot;fullmenu&quot;&gt;&gt;}, 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;order_i&quot;&gt;&gt;,register},&lt;&lt;&quot;0&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;rest_location_p&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;&quot;10.844117421366443,106.63982392275398&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;restaurant_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;&quot;rest848e042b3a0488640981c8a6dc4a8281&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;restaurant_status_id&quot;&gt;&gt;,register},&lt;&lt;&quot;inactive&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;start_time&quot;&gt;&gt;,register},&lt;&lt;&quot;dont_use&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;status_id&quot;&gt;&gt;,register},&lt;&lt;&quot;hide&quot;&gt;&gt;}, 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;updated_by_id&quot;&gt;&gt;,register},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;},
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {{&lt;&lt;&quot;updated_time_dt&quot;&gt;&gt;,register},&lt;&lt;&quot;2017-02-06T17:22:39Z&quot;&gt;&gt;}],
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; [],
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; [],
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;131,108,0,0,0,3,104,2,109,0,0,0,12,39,21,84,209,219,42,57,233,0,0,156,252,97,34,104,2,109,0,0,0,12,132,107,248,226,103,5,182,208,0,0,118,2,97,40,104,2,109,0,0,0,12,137,252,139,186,176,202,25,96,0,0,195,164,97,54,106&gt;&gt;}
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; *  Update with update_type
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Below is Map data before using riakc_map:to_op(Map) :
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {map, [] ,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; [{{&lt;&lt;&quot;account_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;}},{{&lt;&lt;&quot;created_by_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;}},{{&lt;&lt;&quot;created_time_dt&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-01-27T03:34:04Z&quot;&gt;&gt;}},{{&lt;&lt;&quot;currency&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;cad&quot;&gt;&gt;}},{{&lt;&lt;&quot;end_time&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;dont_use&quot;&gt;&gt;}},{{&lt;&lt;&quot;id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;menufe89488afa948875cab6b0b18d579f21&quot;&gt;&gt;}},{{&lt;&lt;&quot;maintain_mode_b&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;false&quot;&gt;&gt;}},{{&lt;&lt;&quot;menu_category_revision_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0-634736bc14e0bd3ed7e3fe0f1ee64443&quot;&gt;&gt;}},{{&lt;&lt;&quot;name&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;fullmenu&quot;&gt;&gt;}},{{&lt;&lt;&quot;order_i&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;0&quot;&gt;&gt;}},{{&lt;&lt;&quot;rest_location_p&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;10.844117421366443,106.63982392275398&quot;&gt;&gt;}},{{&lt;&lt;&quot;restaurant_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;rest848e042b3a0488640981c8a6dc4a8281&quot;&gt;&gt;}},{{&lt;&lt;&quot;restaurant_status_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;inactive&quot;&gt;&gt;}},{{&lt;&lt;&quot;start_time&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;dont_use&quot;&gt;&gt;}},{{&lt;&lt;&quot;status_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;show&quot;&gt;&gt;}},{{&lt;&lt;&quot;updated_by_id&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;accounta25a424b8484181e8ba1bec25bf7c491&quot;&gt;&gt;}},{{&lt;&lt;&quot;updated_time_dt&quot;&gt;&gt;,register},{register,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;2017-02-06T17:22:39Z&quot;&gt;&gt;}}],
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; [] ,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;&lt;131,108,0,0,0,3,104,2,109,0,0,0,12,39,21,84,209,219,42,57,233,0,0,156,252,97,34,104,2,109,0,0,0,12,132,107,248,226,103,5,182,208,0,0,118,2,97,39,104,2,109,0,0,0,12,137,252,139,186,176,202,25,96,0,0,195,164,97,53,106&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; }
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Best regards,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hue Tran
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;riak.conf&gt;_______________________________________________
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt; 
&gt;&gt; 
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17951.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17952">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17952">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg17953.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg17950.html">Re: [Basho Riak] Fail To Update Document Repeatly ...</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17951.html">Re: [Basho Riak] Fail To Update Document Repe...</a></span> <span class="sender italic">DeadZen</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: [Basho Riak] Fail To Update Document ...</span> <span class="sender italic">John Daily</span></li>
<li class="icons-email"><span class="subject"><a href="msg17953.html">Re: [Basho Riak] Fail To Update Document ...</a></span> <span class="sender italic">Nguyễn Văn Nghĩa Em</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17957.html">Re: [Basho Riak] Fail To Update Docum...</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li class="icons-email"><span class="subject"><a href="msg17959.html">Re: [Basho Riak] Fail To Update Docum...</a></span> <span class="sender italic">John Daily</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17960.html">Re: [Basho Riak] Fail To Update D...</a></span> <span class="sender italic">my hue</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17961.html">Re: [Basho Riak] Fail To Upd...</a></span> <span class="sender italic">John Daily</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg17963.html">Re: [Basho Riak] Fail To Update D...</a></span> <span class="sender italic">DAO CUONG</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: [Basho Riak] Fail To Update Document Repeatly With Cluster of 5	Nodes">
<input type="hidden" name="msgid" value="E1AA39DB-3BB8-4EF4-AE36-B97B7D115DA9@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17952.html">
<input type="submit" value=" John Daily ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+%5C%5BBasho+Riak%5C%5D+Fail+To+Update+Document+Repeatly+With+Cluster+of+5%09Nodes%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17951.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg17953.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">E1AA39DB-3BB8-4EF4-AE36-B97B7D115DA9@basho.com</li>
</ul>
</div>
</body>
</html>
